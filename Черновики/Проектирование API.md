# Проектирование API
Онлайн-калькулятор планируется разрабатывать на клиент-серверной архитектуре. Перед проектированием клиентской и серверной частей необходимо определить способ, которым они будут взаимодействовать, то есть необходимо выполнить проектирование API (Application Programming Interface). Проектировать API предполагается с использованием технологии REST, протокола HTTP с передачей данных в формате JSON.

На основе анализа функциональных требований к онлайн-калькулятору и концептуальной диаграммы предметной области можно определить данные, которыми должны обмениваться клиентская и серверная части приложения. По запросу клиентской части серверная часть должна предоставлять список имеющихся алгоритмов. Для каждого из имеющихся алгоритмов по запросу клиентской части необходимо предоставлять описание этого алгоритма, в том числе описание наборов входных и выходных данных. По запросу, содержащему фактические значения для набора выходных данных, необходимо предоставлять фактические значения для набора выходных данных, полученные в результате выполнения выбранного алгоритма.

Ресурсом, к которому API предоставляет доступ являются алгоритмы и конечная точка доступа к списку алгоритмов должна быть доступна по URI /api/algorithms. Получить список имеющихся алгоритмов можно посредством выполнения GET запроса к конечной точке /api/algorithms. Ответ должен содержать список, каждый из экземпляров которого имеет поля name - уникальное имя алгоритма и title - название алгоритма.

Доступ к конкретному алгоритму осуществляется по URI /api/algorithms/{algorithm_name}, с указанием уникального имени алгоритма вместо algorithm_name. Получить описание выбранного алгоритма можно посредством выполнения GET запроса к конечной точке /api/algorithms/{algorithm_name}. Ответ должен содержать описание алгоритма в поле result или информацию об ошибке в поле errors. Описание алгоритма должно содержать поля name - уникальное имя алгоритма и title - название алгоритма, description - описание алгоритма, parameters - список описаний входных данных, outputs - список описаний выходных данных. Экземпляр входных или выходных данных можно описать структурой одного типа, содержащей поля name - уникальное имя параметра и title - название параметра, description - описание параметра, data_type - тип данных параметра, data_shape - размерность параметра и default_value - значение по умолчанию.

Получить результат выполнения алгоритма можно посредством выполнения POST запроса к конечной точке /api/algorithms/{algorithm_name}, с передачей фактических значений для набора входных параметров, то есть списка объектов с полями name - уникальное имя параметра и value - фактическое значение параметра. Ответ должен содержать список фактических значений выходных данных в поле result или информацию об ошибке в поле errors. Для описания фактических значений как входных, так и выходных данных можно использовать одну структуру с полями name и value.

Таблица 1. Примеры запросов для проектируемого API.

| HTTP-запрос | Конечная точка            | Действие                              |
|-------------|---------------------------|---------------------------------------|
| GET         | /api/algorithms           | Получить список имеющихся алгоритмов  |
| GET         | /api/algorithms/fibonacci | Получить описание алгоритма fibonacci |
| POST        | /api/algorithms/fibonacci | Выполнить алгоритм fibonacci          |

Примеры запросов с указанием описанных конечных точек представлены в таблице 1. Для проектирования API использован инструмент моделирования Visual Paradigm. В UML-модель, разработанную на этапе анализа, добавлена диаграмма классов, представляющая доступные по API ресурсы, а также конечные точки API для получения ресурсов. Разработанная диаграмма классов представлена на рисунке 1.

![Диаграмма классов для API](https://github.com/OMMAT-HSE/algoscalc-docs/blob/task-27/uml-model/images/api_class_diagram.png)

Рисунок 1. Диаграмма классов для API.
